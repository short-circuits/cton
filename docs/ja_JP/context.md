# CTONコンテキスト

[docs](../).[ja_JP](./README.md).[CTON coreAPI](./coreAPI.md).CTONコンテキスト

CTONコンテキストはCTONメモリ管理のユニットで、
複数のスレッドで並行して実行しても、
問題が生じないように設計した最小のユニットである。

複数のスレッドで同じコンテキスト、
または同じコンテキストから作ったオブジェクトを操作するには、
排他制御は常に必要である。
それに対して、同じコンテキストではない限り、
排他制御が無くてもスレッドセーフが保証される。

## cton_init

`cton_ctx *cton_init(cton_memhook *hook);`

- CTONコンテキストを生成する。

引数でメモリ確保や解放をするときに使う関数を指定できる。具体の使い方はメモリフークの部分を参照してください。

パラメータによる定義されたメモリフークが使えない場合やメモリ確保失敗した時に、この関数は`NULL`で戻る。

## cton_destory

`cton_destory(cton_ctx *ctx);`

- CTONコンテキストを回収する。

この関数はCTONコンテキストを回収する。このコンテキストから確保したすべてのメモリも回収される。もしメモリフークのなかで`destroy`関数が有効であれば、その関数が呼び出され、メモリプールがリリースされることを望まれる。